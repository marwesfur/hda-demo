(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Gcji:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=function(){return function(){}}(),i=e("pMnS"),a=e("P3h3"),o=e("7+zM"),r=e("wswq"),d=e("4it3"),c=e("XBGS"),s=e("560i"),p=e("sLf6"),m=e("bkbk"),f=e("sbgs"),g=e("k7Pr"),h=e("wz8u"),v=e("FdvK"),b=e("HPVg"),C=e("buhj"),y=e("uDH3"),T=e("oK78"),D=e("tRLp"),S=e("qpox"),x=e("M7qa"),_=e("Jc1t"),O=e("A7o+"),M=e("Ip0R"),w=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Shift","Insert"],P=function(){function n(n){this.el=n}return n.prototype.onKeyDown=function(n){if(-1===w.indexOf(n.key)&&!n.ctrlKey){var l=this.el.nativeElement.value.toString().replace(/[^\d]/g,"");(!/^\d+$/.test(n.key)||this.digitsLimit&&l.length+1>this.digitsLimit)&&n.preventDefault()}},n}(),I=e("gIcY"),R=e("S3+s"),E=e("5cgW"),q=e("+3l6"),k=e("hw5d"),F=e("06BB"),V=e("TUEh"),j=e("4YZI"),z=e("Hz84"),A=e("mrSG"),N=e("wd/x"),L=e("CARG"),G=function(){function n(n){this.gridFieldFormatterFactory=n}return n.prototype.ngOnInit=function(){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(n){return this.formatter=this.gridFieldFormatterFactory.create(),this.formatter.gridColumnDefinitionProvider=this.columnDefinitions,[2]})})},n.prototype.getColumnsCount=function(){return this.enableHorizontalMode?this.dataSource&&this.dataSource.length:this.columnDefinitions.definitions.length},n.prototype.hasData=function(){return this.dataSource&&this.dataSource.length},n}(),H=t["\u0275crt"]({encapsulation:0,styles:[[".simple-grid-container[_ngcontent-%COMP%]{overflow-x:auto}.simple-grid[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.08)}.simple-grid.vertical[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:rgba(0,0,0,.04)}.simple-grid.vertical[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.no-items[_ngcontent-%COMP%]{background-color:transparent}.simple-grid[_ngcontent-%COMP%]     td, .simple-grid[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 12px;min-width:100px;overflow:hidden;vertical-align:middle}.simple-grid[_ngcontent-%COMP%]     td{white-space:nowrap;text-overflow:ellipsis}.simple-grid[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);cursor:default;white-space:normal}.simple-grid.horizontal[_ngcontent-%COMP%]{text-align:center;width:100%}.simple-grid.horizontal[_ngcontent-%COMP%]     td{border:1px solid rgba(0,0,0,.08);text-overflow:inherit;white-space:inherit;max-width:inherit}.simple-grid.horizontal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:rgba(0,0,0,.04)}.simple-grid.horizontal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.no-items[_ngcontent-%COMP%]{background-color:transparent}.pager[_ngcontent-%COMP%]{text-align:right}"]],data:{}});function K(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function B(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"th",[],[[1,"colspan",0]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,K)),t["\u0275did"](4,540672,null,0,M.s,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(n,l){n(l,4,0,l.component.toolbarTemplate)},function(n,l){n(l,2,0,l.component.columnDefinitions.definitions.length)})}function Y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"th",[],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,M.o,[t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),(n()(),t["\u0275ted"](3,null,[" "," "])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],function(n,l){var e=l.component;n(l,2,0,e.columnStyles&&e.columnStyles[l.context.$implicit.field]?e.columnStyles[l.context.$implicit.field]:t["\u0275EMPTY_MAP"])},function(n,l){n(l,3,0,t["\u0275unv"](l,3,0,t["\u0275nov"](l,4).transform(l.context.$implicit.title)))})}function U(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Y)),t["\u0275did"](2,278528,null,0,M.k,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.columnDefinitions.definitions)},null)}function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,$)),t["\u0275did"](2,540672,null,0,M.s,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{dataItem:0,column:1,index:2,columnStyles:3,columnTemplates:4,formatter:5}),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component,u=n(l,3,0,l.parent.context.$implicit,l.context.$implicit,l.parent.context.index,e.columnStyles,e.columnTemplates,e.formatter);n(l,2,0,u,t["\u0275nov"](l.parent.parent.parent.parent,14))},null)}function W(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](3,278528,null,0,M.k,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,3,0,l.component.columnDefinitions.definitions)},null)}function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,W)),t["\u0275did"](2,278528,null,0,M.k,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,2,0,l.component.dataSource)},null)}function X(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](2,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,2,0,l.component.hasData(),t["\u0275nov"](l.parent,15))},null)}function Q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,Q)),t["\u0275did"](2,540672,null,0,M.s,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{dataItem:0,column:1,index:2,columnStyles:3,columnTemplates:4,formatter:5}),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component,u=n(l,3,0,l.context.$implicit,l.parent.context.$implicit,l.context.index,e.columnStyles,e.columnTemplates,e.formatter);n(l,2,0,u,t["\u0275nov"](l.parent.parent.parent.parent,14))},null)}function ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](3,278528,null,0,M.k,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,3,0,l.component.dataSource)},null)}function en(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ln)),t["\u0275did"](2,278528,null,0,M.k,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,2,0,l.component.columnDefinitions.definitions)},null)}function tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,en)),t["\u0275did"](2,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,2,0,l.component.hasData(),t["\u0275nov"](l.parent,15))},null)}function un(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function an(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,un)),t["\u0275did"](2,540672,null,0,M.s,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{formatter:0,dataItem:1,column:2,index:3}),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=n(l,3,0,l.parent.context.formatter,l.parent.context.dataItem,l.parent.context.column,l.parent.context.index);n(l,2,0,e,l.parent.context.columnTemplates[l.parent.context.column.field])},null)}function on(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"td",[],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,M.o,[t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),(n()(),t["\u0275ted"](2,null,[" "," "]))],function(n,l){n(l,1,0,l.parent.context.columnStyles&&l.parent.context.columnStyles[l.parent.context.column.field]?l.parent.context.columnStyles[l.parent.context.column.field]:t["\u0275EMPTY_MAP"])},function(n,l){var e=l.parent.context.formatter.format(l.parent.context.dataItem,l.parent.context.column.field);n(l,2,0,e)})}function rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,an)),t["\u0275did"](1,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["defaultCellTemplate",2]],null,0,null,on))],function(n,l){n(l,1,0,l.context.columnTemplates&&l.context.columnTemplates[l.context.column.field],t["\u0275nov"](l,2))},null)}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"tr",[["class","no-items"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"td",[],[[1,"colspan",0]],null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],null,function(n,l){n(l,1,0,l.component.getColumnsCount()),n(l,2,0,t["\u0275unv"](l,2,0,t["\u0275nov"](l,3).transform("*.items.notAvailable")))})}function cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,3,"td",[["class","pager"]],[[1,"colspan",0]],null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" "," "," "," "," "])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],null,function(n,l){var e=l.component;n(l,2,0,e.getColumnsCount()),n(l,3,0,e.dataSource&&e.dataSource.length,t["\u0275unv"](l,3,1,t["\u0275nov"](l,4).transform("*.grid.itemsOfLabel")),e.dataSource&&e.dataSource.length,t["\u0275unv"](l,3,3,t["\u0275nov"](l,5).transform("*.grid.itemsLabel")))})}function sn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"td",[],[[1,"colspan",0]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,sn)),t["\u0275did"](4,540672,null,0,M.s,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(n,l){n(l,4,0,l.component.footerTemplate)},function(n,l){n(l,2,0,l.component.getColumnsCount())})}function mn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,20,"div",[["class","simple-grid-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,19,"table",[["class","simple-grid"]],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,M.j,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{horizontal:0,vertical:1}),(n()(),t["\u0275eld"](4,0,null,null,4,"thead",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,B)),t["\u0275did"](6,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,U)),t["\u0275did"](8,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](9,0,null,null,6,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,X)),t["\u0275did"](11,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tn)),t["\u0275did"](13,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,[["cellContainer",2]],null,0,null,rn)),(n()(),t["\u0275and"](0,[["noItemsTemplate",2]],null,0,null,dn)),(n()(),t["\u0275eld"](16,0,null,null,4,"tfoot",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,cn)),t["\u0275did"](18,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](20,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component,t=n(l,3,0,e.enableHorizontalMode,!e.enableHorizontalMode);n(l,2,0,"simple-grid",t),n(l,6,0,e.toolbarTemplate),n(l,8,0,!e.enableHorizontalMode),n(l,11,0,!e.enableHorizontalMode),n(l,13,0,e.enableHorizontalMode),n(l,18,0,e.enablePager&&e.hasData()),n(l,20,0,e.footerTemplate)},null)}var fn=e("8DBb"),gn=e("Dzoe"),hn=new N.a([new fn.a("month","impressionCount.grid.month"),new fn.a("value","impressionCount.grid.value",{numberFormat:"n"}),new fn.a("readingDate","impressionCount.grid.readingDate",{dateTimeType:gn.a.DateTime})]),vn=e("5uwY"),bn=e("/n/o"),Cn=e("/Tr7");function yn(n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var l=Object(Cn.a)(n);return l.setHours(23,59,59,999),l}var Tn=e("zOWb"),Dn=18,Sn=function(){function n(n,l){this.impressionService=n,this.toastrService=l,this.columnDefinitions=hn,this.valueLength=Dn,this.vmiRightsKeys=Tn.a}return Object.defineProperty(n.prototype,"dataSourceSplitIndex",{get:function(){return this.rawDataSource.length-4-(this.enableEditMode?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawDataSource",{get:function(){return this.gridData&&this.gridData.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"archiveDataSource",{get:function(){var n=this;return this.rawDataSource.filter(function(l,e){return e<n.dataSourceSplitIndex}).reverse()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){var n=this;return this.rawDataSource.filter(function(l,e){return e>=n.dataSourceSplitIndex})},enumerable:!0,configurable:!0}),n.prototype.getEditItem=function(){var n=this.rawDataSource;return n&&n[n.length-1]?n[n.length-1]:null},n.prototype.save=function(){return A.__awaiter(this,void 0,void 0,function(){var n;return A.__generator(this,function(l){switch(l.label){case 0:return this.canSave()?(n=this.getEditItem())?[4,this.impressionService.saveEquipmentTotalizer(this.gridData.equipmentNumber,n.value,n.readingDate)]:[3,2]:[2];case 1:l.sent(),this.toastrService.localizedSuccess("impressionCount.grid.saved"),l.label=2;case 2:return[2]}})})},n.prototype.isCurrentOpenMonth=function(){return vn.a.isCurrentOpenMonth(new Date)},n.prototype.canSave=function(){var n=this.getEditItem();if(!n)return!1;if(!n.value||n.value<=0)return!1;if(!n.readingDate)return!1;var l=n.readingDate;if(vn.a.isPreviousOpenMonth(new Date))return vn.a.isPreviousOpenMonthSelectableDate(l);var e=new Date;return vn.a.isCurrentOpenMonth(l)&&l<yn(e)},n.prototype.setupCalendar=function(){var n=new Date;vn.a.isPreviousOpenMonth(n)?(this.minDate=vn.a.getPreviousOpenMonthMinSelectableDate(n),this.maxDate=vn.a.getPreviousOpenMonthMaxSelectableDate(n)):vn.a.isCurrentOpenMonth(n)&&(this.minDate=vn.a.getPreviousOpenMonthMaxDate(n),this.maxDate=yn(n))},n.prototype.parseFormattedNumber=function(n){return parseInt(n.replace(/[^\d]/g,""),10)},n.prototype.ngOnInit=function(){this.setupCalendar()},n}(),xn=t["\u0275crt"]({encapsulation:0,styles:[[".month[_ngcontent-%COMP%]{font-weight:700;white-space:nowrap}.count-grids[_ngcontent-%COMP%]{display:flex}.count-grid[_ngcontent-%COMP%]{font-size:10px;width:calc(100% - (114px * 4));direction:rtl}.count-grid.edit[_ngcontent-%COMP%]{width:calc(100% - (114px * 4) - 124px)}.fixed-count-grid[_ngcontent-%COMP%]{font-size:10px;width:calc(114px * 4)}.fixed-count-grid.edit[_ngcontent-%COMP%]{width:calc(114px * 4 + 124px)}.fixed-count-grid.edit[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:124px;max-width:124px}.value[_ngcontent-%COMP%]{line-height:20px;min-height:25px}.value[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:92px;padding-left:4px}.reading-date[_ngcontent-%COMP%]{min-height:25px}.reading-date[_ngcontent-%COMP%]     .k-datepicker{width:92px}.reading-date[_ngcontent-%COMP%]     .k-input{font-size:10px}.actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;align-items:center}.actions[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:auto}.actions[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}"]],data:{}});function _n(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","month"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",", ",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],null,function(n,l){n(l,2,0,t["\u0275unv"](l,2,0,t["\u0275nov"](l,3).transform("*.month."+l.context.dataItem.month)),l.context.dataItem.year)})}function On(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""]))],null,function(n,l){var e=l.context.formatter.format(l.context.dataItem,l.context.column.field);n(l,2,0,e)})}function Mn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","reading-date"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""]))],null,function(n,l){var e=l.context.formatter.format(l.context.dataItem,l.context.column.field);n(l,2,0,e)})}function wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],null,function(n,l){n(l,1,0,t["\u0275unv"](l,1,0,t["\u0275nov"](l,2).transform("impressionCount.grid.enter_current_totalisator")))})}function Pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275ted"](0,null,["",", ",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],null,function(n,l){n(l,0,0,t["\u0275unv"](l,0,0,t["\u0275nov"](l,1).transform("*.month."+l.parent.context.dataItem.month)),l.parent.context.dataItem.year)})}function In(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","month"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,wn)),t["\u0275did"](3,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["monthPlainTemplate",2]],null,0,null,Pn))],function(n,l){var e=l.component;n(l,3,0,e.enableEditMode&&e.dataSource&&e.dataSource.length==l.context.index+1,t["\u0275nov"](l,4))},null)}function Rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,7,"input",[["allow-digits-only",""],["id","valueInput"],["name","valueInput"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var u=!0,i=n.component;return"keydown"===l&&(u=!1!==t["\u0275nov"](n,2).onKeyDown(e)&&u),"input"===l&&(u=!1!==t["\u0275nov"](n,3)._handleInput(e.target.value)&&u),"blur"===l&&(u=!1!==t["\u0275nov"](n,3).onTouched()&&u),"compositionstart"===l&&(u=!1!==t["\u0275nov"](n,3)._compositionStart()&&u),"compositionend"===l&&(u=!1!==t["\u0275nov"](n,3)._compositionEnd(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(n.parent.context.dataItem.value=i.parseFormattedNumber(e))&&u),u},null,null)),t["\u0275did"](2,16384,null,0,P,[t.ElementRef],{digitsLimit:[0,"digitsLimit"]},null),t["\u0275did"](3,16384,null,0,I.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,I.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,I.NG_VALUE_ACCESSOR,function(n){return[n]},[I.DefaultValueAccessor]),t["\u0275did"](5,671744,null,0,I.NgModel,[[8,null],[8,null],[8,null],[6,I.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275ppd"](6,1),t["\u0275prd"](2048,null,I.NgControl,null,[I.NgModel]),t["\u0275did"](8,16384,null,0,I.NgControlStatus,[[4,I.NgControl]],null,null)],function(n,l){n(l,2,0,l.component.valueLength);var e=t["\u0275unv"](l,5,1,n(l,6,0,t["\u0275nov"](l.parent.parent,0),l.parent.context.dataItem.value));n(l,5,0,"valueInput",e)},function(n,l){n(l,1,0,t["\u0275nov"](l,8).ngClassUntouched,t["\u0275nov"](l,8).ngClassTouched,t["\u0275nov"](l,8).ngClassPristine,t["\u0275nov"](l,8).ngClassDirty,t["\u0275nov"](l,8).ngClassValid,t["\u0275nov"](l,8).ngClassInvalid,t["\u0275nov"](l,8).ngClassPending)})}function En(n){return t["\u0275vid"](0,[(n()(),t["\u0275ted"](0,null,["",""]))],null,function(n,l){var e=l.parent.context.formatter.format(l.parent.context.dataItem,l.parent.context.column.field);n(l,0,0,e)})}function qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","value"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Rn)),t["\u0275did"](3,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["valuePlainTemplate",2]],null,0,null,En))],function(n,l){var e=l.component;n(l,3,0,e.enableEditMode&&e.dataSource&&e.dataSource.length==l.context.index+1,t["\u0275nov"](l,4))},null)}function kn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,25,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,24,"kendo-datepicker",[["name","readingDatePicker"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.parent.context.dataItem.readingDate=e)&&t),t},R.i,R.c)),t["\u0275prd"](6144,null,E.e,null,[q.o]),t["\u0275prd"](256,null,k.b,"kendo.datepicker",[]),t["\u0275prd"](131584,null,k.c,k.c,[k.b,[2,k.d],[2,k.e]]),t["\u0275prd"](512,null,q.T,q.T,[]),t["\u0275did"](6,770048,null,8,q.o,[t.NgZone,k.c,t.ChangeDetectorRef,F.g,t.ElementRef,t.Renderer2,t.Injector,q.T,[2,q.Y]],{min:[0,"min"],max:[1,"max"],format:[2,"format"]},null),t["\u0275qud"](335544320,1,{cellTemplate:0}),t["\u0275qud"](335544320,2,{monthCellTemplate:0}),t["\u0275qud"](335544320,3,{yearCellTemplate:0}),t["\u0275qud"](335544320,4,{decadeCellTemplate:0}),t["\u0275qud"](335544320,5,{centuryCellTemplate:0}),t["\u0275qud"](335544320,6,{weekNumberTemplate:0}),t["\u0275qud"](335544320,7,{headerTitleTemplate:0}),t["\u0275qud"](335544320,8,{navigationItemTemplate:0}),t["\u0275pod"](15,{skeleton:0}),t["\u0275prd"](1024,null,I.NG_VALIDATORS,function(n){return[n]},[q.o]),t["\u0275prd"](1024,null,I.NG_VALUE_ACCESSOR,function(n){return[n]},[q.o]),t["\u0275did"](18,671744,null,0,I.NgModel,[[8,null],[6,I.NG_VALIDATORS],[8,null],[6,I.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,I.NgControl,null,[I.NgModel]),t["\u0275did"](20,16384,null,0,I.NgControlStatus,[[4,I.NgControl]],null,null),(n()(),t["\u0275eld"](21,0,null,null,4,"kendo-datepicker-messages",[],null,null,null,R.j,R.d)),t["\u0275prd"](6144,null,q.K,null,[q.p]),t["\u0275did"](23,770048,null,0,q.p,[k.c],{today:[0,"today"],toggle:[1,"toggle"]},null),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],function(n,l){var e=l.component,u=e.minDate,i=e.maxDate,a=n(l,15,0,"yMMMd");n(l,6,0,u,i,a),n(l,18,0,"readingDatePicker",l.parent.context.dataItem.readingDate),n(l,23,0,t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](l,23,0,t["\u0275nov"](l,24).transform("datepicker.today")),""),t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](l,23,1,t["\u0275nov"](l,25).transform("datepicker.toggle")),""))},function(n,l){n(l,1,1,[t["\u0275nov"](l,6).wrapperClasses,t["\u0275nov"](l,6).wrapperClasses,t["\u0275nov"](l,6).wrapperClasses,t["\u0275nov"](l,6).disabledClass,t["\u0275nov"](l,20).ngClassUntouched,t["\u0275nov"](l,20).ngClassTouched,t["\u0275nov"](l,20).ngClassPristine,t["\u0275nov"](l,20).ngClassDirty,t["\u0275nov"](l,20).ngClassValid,t["\u0275nov"](l,20).ngClassInvalid,t["\u0275nov"](l,20).ngClassPending])})}function Fn(n){return t["\u0275vid"](0,[(n()(),t["\u0275ted"](0,null,["",""]))],null,function(n,l){var e=l.parent.context.formatter.format(l.parent.context.dataItem,l.parent.context.column.field);n(l,0,0,e)})}function Vn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","reading-date"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,kn)),t["\u0275did"](3,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["readingDatePlainTemplate",2]],null,0,null,Fn))],function(n,l){var e=l.component;n(l,3,0,e.enableEditMode&&e.dataSource&&e.dataSource.length==l.context.index+1,t["\u0275nov"](l,4))},null)}function jn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,7,"div",[["class","buttons"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,6,"button",[["class","btn btn-primary"],["type","button"]],[[8,"hidden",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.save()&&t),t},null,null)),t["\u0275did"](3,278528,null,0,M.j,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](4,{disabled:0}),t["\u0275did"](5,81920,null,0,V.a,[j.a,O.l,t.ElementRef],{ngxRequiredRight:[0,"ngxRequiredRight"]},null),t["\u0275pod"](6,{rightKey:0}),(n()(),t["\u0275ted"](7,null,[" "," "])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef])],function(n,l){var e=l.component,t=n(l,4,0,!e.canSave());n(l,3,0,"btn btn-primary",t);var u=n(l,6,0,e.vmiRightsKeys.TotalizerUpdate);n(l,5,0,u)},function(n,l){n(l,2,0,t["\u0275nov"](l,5).hidden),n(l,7,0,t["\u0275unv"](l,7,0,t["\u0275nov"](l,8).transform("*.save")))})}function zn(n){return t["\u0275vid"](0,[t["\u0275pid"](0,z.e,[z.d]),(n()(),t["\u0275eld"](1,0,null,null,16,"div",[["class","count-grids"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,7,"hda-simple-grid",[["class","count-grid"]],null,null,null,mn,H)),t["\u0275did"](3,278528,null,0,M.j,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](4,{edit:0}),t["\u0275did"](5,114688,null,0,G,[L.a],{enableHorizontalMode:[0,"enableHorizontalMode"],columnDefinitions:[1,"columnDefinitions"],columnTemplates:[2,"columnTemplates"],dataSource:[3,"dataSource"]},null),t["\u0275pod"](6,{month:0,value:1,readingDate:2}),(n()(),t["\u0275and"](0,[["countGridMonthTemplate",2]],null,0,null,_n)),(n()(),t["\u0275and"](0,[["countGridValueTemplate",2]],null,0,null,On)),(n()(),t["\u0275and"](0,[["countGridReadingDateTemplate",2]],null,0,null,Mn)),(n()(),t["\u0275eld"](10,0,null,null,7,"hda-simple-grid",[["class","fixed-count-grid"]],null,null,null,mn,H)),t["\u0275did"](11,278528,null,0,M.j,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](12,{edit:0}),t["\u0275did"](13,114688,null,0,G,[L.a],{enableHorizontalMode:[0,"enableHorizontalMode"],columnDefinitions:[1,"columnDefinitions"],columnTemplates:[2,"columnTemplates"],dataSource:[3,"dataSource"]},null),t["\u0275pod"](14,{month:0,value:1,readingDate:2}),(n()(),t["\u0275and"](0,[["monthTemplate",2]],null,0,null,In)),(n()(),t["\u0275and"](0,[["valueTemplate",2]],null,0,null,qn)),(n()(),t["\u0275and"](0,[["readingDateTemplate",2]],null,0,null,Vn)),(n()(),t["\u0275and"](16777216,null,null,1,null,jn)),t["\u0275did"](19,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component,u=n(l,4,0,e.enableEditMode);n(l,3,0,"count-grid",u);var i=e.columnDefinitions,a=n(l,6,0,t["\u0275nov"](l,7),t["\u0275nov"](l,8),t["\u0275nov"](l,9));n(l,5,0,!0,i,a,e.archiveDataSource);var o=n(l,12,0,e.enableEditMode);n(l,11,0,"fixed-count-grid",o);var r=e.columnDefinitions,d=n(l,14,0,t["\u0275nov"](l,15),t["\u0275nov"](l,16),t["\u0275nov"](l,17));n(l,13,0,!0,r,d,e.dataSource),n(l,19,0,e.enableEditMode)},null)}var An=e("KFqz"),Nn=e("6vzt"),Ln=e("B5Mp"),Gn=e("nAsm"),Hn=e("szDJ"),Kn=e("Dz+4"),Bn=e("GH8E"),Yn=e("u2wg"),Un=e("bO4m"),$n=function(n){function l(l,e,t){var u=n.call(this)||this;return u.translateService=l,u.chartBuilder=e,u.baseTargetDataProviderFactory=t,u}return A.__extends(l,n),Object.defineProperty(l.prototype,"chartData",{set:function(n){n&&(this._chartData=n,this.initBaseTargetProvider(),this.initializeChart())},enumerable:!0,configurable:!0}),l.prototype.ngOnDestroy=function(){this.baseTargetDataProvider.destroy(),n.prototype.ngOnDestroy.call(this)},l.prototype.initializeChart=function(n){var l,e,t=this.prepareChartData();this._chartData.lines&&(l=this._chartData.lines.baseline,e=this._chartData.lines.targetline),n&&(l=n.baseLine,e=n.targetLine),this.chartConfiguration=this.createHighchartsOptions(t.months,t.chartEquipmentArray,l,e)},l.prototype.initBaseTargetProvider=function(){var n=this;this.baseTargetDataSource=new Kn.a,this.baseTargetDataProvider=this.baseTargetDataProviderFactory.create(Bn.b.External,this.baseTargetDataSource),this.subscriptions.push(this.baseTargetDataProvider.saved$.subscribe(function(l){return n.initializeChart(l)})),this.baseTargetDataSource.update({baseLine:this._chartData.lines?this._chartData.lines.baseline:0,targetLine:this._chartData.lines?this._chartData.lines.targetline:0,chartKey:this._chartData.chartKey,equipmentNumber:this._chartData.equipment.sapEquipmentNumber})},l.prototype.prepareChartData=function(){for(var n=[],l=[],e=(new Date).getUTCMonth()+1,t=(new Date).getUTCFullYear(),u=[],i=0,a=0,o=this._chartData.data;a<o.length;a++){var r=o[a],d=r.month,c=r.year,s=r.value,p=this.translateService.instant("*.month."+d)+" "+c;-1===l.indexOf(p)&&l.push(p),d===e&&c===t&&(p=this.translateService.instant("performanceAnalysis.chart.monthWarning"));var m=s||0;u.push({name:p,y:i&&m?m-i:0}),i=m}return n.push({name:this._chartData.equipment.name,data:u,type:"column"}),{months:l,chartEquipmentArray:n}},l.prototype.createHighchartsOptions=function(n,l,e,t){return this.chartBuilder.buildBarChart(l,[{categories:n}],this.getYAxes(e,t))},l.prototype.getYAxes=function(n,l){var e=[];return n&&e.push(this.chartBuilder.buildBaseLine(n,"impressionCount.chart.baseLine")),l&&e.push(this.chartBuilder.buildTargetLine(l,"impressionCount.chart.targetLine")),[this.chartBuilder.buildAxis("impressionCount.chart.yAxis",0,!1,e)]},l}(Yn.a),Zn=t["\u0275crt"]({encapsulation:0,styles:[[".chart-head[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.chart-head[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{font-size:18px}.chart-head[_ngcontent-%COMP%]   .chart-settings[_ngcontent-%COMP%]{margin-left:auto}"]],data:{}});function Wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"hda-base-target",[],null,null,null,An.b,An.a)),t["\u0275did"](1,245760,null,0,Nn.a,[O.l,bn.a,j.a,Ln.a],{dataProvider:[0,"dataProvider"]},null)],function(n,l){n(l,1,0,l.component.baseTargetDataProvider)},null)}function Jn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","chart-head"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","chart-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","chart-settings"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Wn)),t["\u0275did"](6,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,1,"hda-chart",[],null,null,null,Gn.b,Gn.a)),t["\u0275did"](8,49152,null,0,Hn.b,[],{configuration:[0,"configuration"]},null)],function(n,l){var e=l.component;n(l,6,0,e.baseTargetDataProvider),n(l,8,0,e.chartConfiguration)},function(n,l){n(l,2,0,t["\u0275unv"](l,2,0,t["\u0275nov"](l,3).transform("impressionCount.grid.title")))})}var Xn=e("dLU1"),Qn=e("9ig3"),nl=e("jKzE"),ll=e("15JJ"),el=e("t9fZ"),tl=e("ny24"),ul=e("K9Ia"),il=e("59UT"),al=function(n){function l(l,e,t){var u=n.call(this)||this;return u.impressionService=l,u.rightsService=e,u.performanceService=t,u.loadData$=new ul.a,u}return A.__extends(l,n),Object.defineProperty(l.prototype,"equipment",{get:function(){return this._equipment},set:function(n){n&&this._equipment!==n&&(this._equipment=n,this.loadData$.next())},enumerable:!0,configurable:!0}),l.prototype.getChartKey=function(){return"impressionCount"+(this.enableEditMode?il.a.ThirdParty:il.a.Heidelberg)},l.prototype.ngOnInit=function(){var n=this;this.loadData$.pipe(Object(ll.a)(function(){return n.rightsService.observeRightsWithKey(Tn.a.TotalizerRead)}),Object(el.a)(1),Object(tl.a)(this.destroy$)).subscribe(function(l){return n.loadData(l)})},l.prototype.loadData=function(n){return A.__awaiter(this,void 0,void 0,function(){var l,e,t,u,i;return A.__generator(this,function(a){switch(a.label){case 0:return l=new Date,e=Object(Xn.a)(Object(Qn.a)(l),-12),n?[4,this.impressionService.getEquipmentTotalizers(this._equipment.sapEquipmentNumber,e)]:[3,2];case 1:return t=a.sent(),[3,3];case 2:t=[],a.label=3;case 3:return u=this.mapGridData(t),i=vn.a.isCurrentOpenMonth(l)?13:12,this.fillGridDataGaps(u,e,i),this.sortGridData(u),this.enableEditMode&&this.adjustOpenMonthCalendar(u),this.gridData={dataSource:u,equipmentNumber:this._equipment.sapEquipmentNumber},[4,this.initChartData(u)];case 4:return a.sent(),[2]}})})},l.prototype.initChartData=function(n){return A.__awaiter(this,void 0,void 0,function(){var l;return A.__generator(this,function(e){switch(e.label){case 0:return[4,this.performanceService.performanceGetPerformanceLines(this._equipment.sapEquipmentNumber,this.getChartKey())];case 1:return l=e.sent(),this.chartData={data:n,chartKey:this.getChartKey(),equipment:this._equipment,lines:l},[2]}})})},l.prototype.adjustOpenMonthCalendar=function(n){var l=Object.assign({},n[n.length-1],{value:""}),e=new Date;vn.a.isCurrentOpenMonth(e)?l.readingDate=e:vn.a.isPreviousOpenMonth(e)&&(l.readingDate=Object(nl.a)(Object(Xn.a)(e,-1))),n.push(l)},l.prototype.sortGridData=function(n){n.sort(function(n,l){return 12*n.year+n.month-(12*l.year+l.month)})},l.prototype.mapGridData=function(n){return n?n.map(function(n){return Object.assign({},n,{readingDate:new Date(n.readingDate),month:new Date(n.readingDate).getMonth()+1,year:new Date(n.readingDate).getFullYear()})}):[]},l.prototype.fillGridDataGaps=function(n,l,e){for(var t=function(e){var t=Object(Xn.a)(l,e),u=t.getMonth()+1,i=t.getFullYear();n.find(function(n){return n.month===u&&n.year===i})||n.push({month:u,year:i})},u=0;u<e;u++)t(u)},l}(Yn.a),ol=t["\u0275crt"]({encapsulation:0,styles:[['@charset "UTF-8";.impression-count-tab[_ngcontent-%COMP%]{background-color:#fff;padding:20px 30px}.impression-count-tab[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14pt;color:#004178;margin-bottom:20px}']],data:{}});function rl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"hda-impression-count-grid",[],null,null,null,zn,xn)),t["\u0275did"](2,114688,null,0,Sn,[vn.a,bn.a],{enableEditMode:[0,"enableEditMode"],gridData:[1,"gridData"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"hda-impression-count-chart",[],null,null,null,Jn,Zn)),t["\u0275did"](4,180224,null,0,$n,[O.l,Un.a,Bn.a],{chartData:[0,"chartData"]},null)],function(n,l){var e=l.component;n(l,2,0,e.enableEditMode,e.gridData),n(l,4,0,e.chartData)},null)}function dl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","impression-count-tab"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"p",[["class","title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),(n()(),t["\u0275and"](16777216,null,null,1,null,rl)),t["\u0275did"](5,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,e.gridData&&e.chartData)},function(n,l){var e=l.component;n(l,2,0,t["\u0275unv"](l,2,0,t["\u0275nov"](l,3).transform(e.equipment&&e.equipment.name)))})}var cl=e("VTae"),sl=e("85CO"),pl=e("kKfG"),ml=e("0+hA"),fl=e("VMLz"),gl=function(n){function l(l,e){var t=n.call(this,e)||this;return t.translateService=l,t}return A.__extends(l,n),l.prototype.setupGuidedTour=function(n){this.impressionCountType=n;var l=new fl.b(this,"impressioncount");this.introService.setCurrentGuidedTourHandler(l,!0)},l.prototype.getGuidedTourSettings=function(){var n=this,l=function(l){return n.translateService.instant("impression-count.intro."+l)},e=function(n){return"<b>"+l(n+".title")+"</b><br>"+l(n+".body")};return[{intro:e("guidedTourIntro"),tooltipClass:"wideTooltip"},{element:"#"+this.impressionCountType,intro:e("#"+this.impressionCountType),position:"bottom-middle"},{element:"#equipmentButton",intro:e("equipmentButton"),position:"left"},{element:"#valueInput",intro:e("valueInput"),position:"right"},{element:"#chartConfiguration",intro:e("chartConfiguration"),position:"right"},{element:"#baseLine",intro:e("baseLine"),position:"right"},{element:"#targetLine",intro:e("targetLine"),position:"right"},{element:"#cancel",intro:e("cancel"),position:"right"},{element:"#submit",intro:e("submit"),position:"right"}]},l}(fl.a),hl=function(){function n(n,l,e){var t=this;this.stateService=n,this.impressionEquipmentSelectionServiceFactory=l,this.impressionCountGuidedTour=e,this.impressionCountTypes=il.a,this.heidelbergSelectionService=this.impressionEquipmentSelectionServiceFactory.createEquipmentSelectionService(il.a.Heidelberg,function(n){return t.onHeidelbergEquipmentSelected(n)}),this.thirdPartySelectionService=this.impressionEquipmentSelectionServiceFactory.createEquipmentSelectionService(il.a.ThirdParty,function(n){return t.onThirdPartyEquipmentSelected(n)})}return n.prototype.onHeidelbergEquipmentSelected=function(n){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(l){return this.selectedHeidelbergEquipment=n.slice(0).pop(),[2]})})},n.prototype.onThirdPartyEquipmentSelected=function(n){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(l){return this.selectedThirdPartyEquipment=n.slice(0).pop(),[2]})})},n.prototype.onTabChange=function(l){this.selectedTab!==l&&this.setupEquipmentSelectionPopup(l),this.selectedTab=l,n.tabName=l},n.prototype.ngOnInit=function(){return A.__awaiter(this,void 0,void 0,function(){var n,l,e;return A.__generator(this,function(t){switch(t.label){case 0:return n=this,[4,this.heidelbergSelectionService.hasAllowedEquipments()];case 1:return n.showHeidelbergTab=t.sent(),l=this,[4,this.thirdPartySelectionService.hasAllowedEquipments()];case 2:return l.showThirdPartyTab=t.sent(),this.showHeidelbergTab||this.showThirdPartyTab?(e=this.selectDefaultTab(),this.setupEquipmentSelectionPopup(e)):this.stateService.go(ml.a.Home),this.impressionCountGuidedTour.setupGuidedTour(this.selectedTab===il.a.ThirdParty?il.a.ThirdParty:il.a.Heidelberg),[2]}})})},n.prototype.ngOnDestroy=function(){this.impressionCountGuidedTour.exitTour()},n.prototype.selectDefaultTab=function(){return this.showHeidelbergTab?this.selectedTab=il.a.Heidelberg:this.showThirdPartyTab&&(this.selectedTab=il.a.ThirdParty),this.selectedTab},n.prototype.setupEquipmentSelectionPopup=function(n){n===il.a.Heidelberg?this.equipmentSelectionService=this.heidelbergSelectionService:n===il.a.ThirdParty&&(this.equipmentSelectionService=this.thirdPartySelectionService),this.equipmentSelectionService&&this.equipmentSelectionService.getSelectedEquipments()},n.tabName="",n}(),vl=t["\u0275crt"]({encapsulation:0,styles:[[".actions[_ngcontent-%COMP%]{padding-top:8px;margin-bottom:8px}"]],data:{}});function bl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"],["tab-button",""]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"hda-equipment-selection-popup-button",[["id","equipmentButton"]],null,null,null,D.b,D.a)),t["\u0275did"](2,49152,null,0,S.a,[],{service:[0,"service"],isPrimaryButton:[1,"isPrimaryButton"]},null)],function(n,l){n(l,2,0,l.component.equipmentSelectionService,!0)},null)}function Cl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"hda-tab",[],null,null,null,x.b,x.a)),t["\u0275did"](1,49152,[[1,4]],1,_.a,[],{title:[0,"title"],name:[1,"name"],idForGuidedTour:[2,"idForGuidedTour"]},null),t["\u0275qud"](335544320,2,{templatedTabItem:0}),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](4,0,null,0,1,"hda-impression-count-tab",[],null,null,null,dl,ol)),t["\u0275did"](5,245760,null,0,al,[vn.a,j.a,Ln.a],{equipment:[0,"equipment"]},null)],function(n,l){var e=l.component;n(l,1,0,t["\u0275unv"](l,1,0,t["\u0275nov"](l,3).transform("impression.tabs.heidelbergEquipment")),e.impressionCountTypes.Heidelberg,e.impressionCountTypes.Heidelberg),n(l,5,0,e.selectedHeidelbergEquipment)},null)}function yl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"hda-tab",[],null,null,null,x.b,x.a)),t["\u0275did"](1,49152,[[1,4]],1,_.a,[],{title:[0,"title"],name:[1,"name"],idForGuidedTour:[2,"idForGuidedTour"]},null),t["\u0275qud"](335544320,3,{templatedTabItem:0}),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](4,0,null,0,1,"hda-impression-count-tab",[],null,null,null,dl,ol)),t["\u0275did"](5,245760,null,0,al,[vn.a,j.a,Ln.a],{enableEditMode:[0,"enableEditMode"],equipment:[1,"equipment"]},null)],function(n,l){var e=l.component;n(l,1,0,t["\u0275unv"](l,1,0,t["\u0275nov"](l,3).transform("impression.tabs.thirdPartyEquipment")),e.impressionCountTypes.ThirdParty,e.impressionCountTypes.ThirdParty),n(l,5,0,!0,e.selectedThirdPartyEquipment)},null)}function Tl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"h4",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""])),t["\u0275pid"](131072,O.k,[O.l,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](3,0,null,null,0,"div",[["class","hdm-horizontal-line horizontal-line-accounting"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,8,"hda-tabs",[["justified","false"]],null,[[null,"selectedTabChange"]],function(n,l,e){var t=!0;return"selectedTabChange"===l&&(t=!1!==n.component.onTabChange(e.name)&&t),t},cl.c,cl.a)),t["\u0275did"](5,1753088,null,1,sl.a,[],{selected:[0,"selected"]},{selectedTabChange:"selectedTabChange"}),t["\u0275qud"](603979776,1,{tabs:1}),(n()(),t["\u0275and"](16777216,null,0,1,null,bl)),t["\u0275did"](8,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,1,1,null,Cl)),t["\u0275did"](10,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,1,1,null,yl)),t["\u0275did"](12,16384,null,0,M.l,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,e.selectedTab),n(l,8,0,e.equipmentSelectionService),n(l,10,0,e.showHeidelbergTab),n(l,12,0,e.showThirdPartyTab)},function(n,l){n(l,1,0,t["\u0275unv"](l,1,0,t["\u0275nov"](l,2).transform("home.accounting.impressionCount")))})}function Dl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"hda-impression-count",[],null,null,null,Tl,vl)),t["\u0275did"](1,245760,null,0,hl,[pl.a,il.b,gl],null,null)],function(n,l){n(l,1,0)},null)}var Sl=t["\u0275ccf"]("hda-impression-count",hl,Dl,{},{},[]),xl=e("2wgN"),_l=e("Ii7j"),Ol=e("zMjF"),Ml=e("Eu2o"),wl=e("qY9q"),Pl=e("W6y8"),Il=e("yK+Y"),Rl=e("mma9"),El=e("zHPI"),ql=e("weA1"),kl=e("gBCR"),Fl=e("ZYCi"),Vl=e("/FZk"),jl=e("CnI1"),zl=e("vNyg"),Al=e("mDeL"),Nl=e("8kdW"),Ll=e("79Zg"),Gl=e("133V"),Hl=e("t/Na"),Kl=e("Om3X"),Bl=e("oQa8"),Yl=e("FDVo"),Ul=e("1Ya2"),$l=e("40TV"),Zl=e("jmvC"),Wl=e("kWYj"),Jl=e("WqRb"),Xl=e("rnSZ"),Ql=e("L2Y4"),ne=e("xj7I"),le=e("wSel"),ee=e("dXO6"),te=e("UVXo"),ue=e("FvPy"),ie=e("ny8w"),ae=e("rmV8"),oe=e("EG6K"),re=e("uiJk"),de=e("sX1y"),ce=e("cuVR"),se=e("2T4p"),pe=e("cjET"),me=e("c3/G");function fe(){return"heidelberg"===hl.tabName?"dave.impression-count-heidelberg.dialog":"thirdparty"===hl.tabName?"dave.impression-count-thirdparty.dialog":null}var ge=e("MmyN"),he=function(){return function(){}}();e.d(l,"ImpressionModuleNgFactory",function(){return ve});var ve=t["\u0275cmf"](u,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,a.a,o.a,o.b,o.g,o.h,r.a,d.b,c.k,c.e,c.a,c.c,c.l,c.f,c.d,c.b,s.a,p.a,m.a,f.a,g.a,h.a,v.a,b.a,C.a,y.a,T.a,Sl]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,M.n,M.m,[t.LOCALE_ID,[2,M.A]]),t["\u0275mpd"](4608,q.i,q.i,[]),t["\u0275mpd"](4608,q.g,q.g,[]),t["\u0275mpd"](4608,q.x,q.x,[]),t["\u0275mpd"](4608,q.N,q.N,[z.d]),t["\u0275mpd"](4608,q.mb,q.mb,[z.d]),t["\u0275mpd"](4608,q.lb,q.lb,[z.d]),t["\u0275mpd"](5120,F.d,xl.b,[]),t["\u0275mpd"](4608,F.g,F.g,[t.ApplicationRef,t.ComponentFactoryResolver,t.Injector,[2,F.d]]),t["\u0275mpd"](4608,q.S,q.S,[q.a]),t["\u0275mpd"](4608,q.j,q.j,[]),t["\u0275mpd"](4608,q.A,q.A,[z.d]),t["\u0275mpd"](4608,q.M,q.M,[z.d]),t["\u0275mpd"](4608,q.X,q.X,[z.d]),t["\u0275mpd"](4608,q.w,q.w,[z.d]),t["\u0275mpd"](4608,_l.e,_l.e,[]),t["\u0275mpd"](4608,_l.g,_l.g,[t.ComponentFactoryResolver,_l.e]),t["\u0275mpd"](4608,I["\u0275angular_packages_forms_forms_j"],I["\u0275angular_packages_forms_forms_j"],[]),t["\u0275mpd"](135680,E.g,E.g,[t.NgZone]),t["\u0275mpd"](4608,_l.p,_l.p,[]),t["\u0275mpd"](4608,_l.u,_l.u,[t.ComponentFactoryResolver,_l.p]),t["\u0275mpd"](4608,O.h,O.g,[]),t["\u0275mpd"](4608,O.c,O.f,[]),t["\u0275mpd"](4608,O.j,O.d,[]),t["\u0275mpd"](4608,O.b,O.a,[]),t["\u0275mpd"](4608,O.l,O.l,[O.m,O.h,O.c,O.j,O.b,O.n,O.o]),t["\u0275mpd"](4608,Ol.a,Ol.a,[t.ComponentFactoryResolver]),t["\u0275mpd"](4608,Ml.a,Ml.a,[Ol.a]),t["\u0275mpd"](4608,Un.a,Un.a,[O.l]),t["\u0275mpd"](4608,wl.a,wl.a,[]),t["\u0275mpd"](4608,Pl.a,Pl.a,[t.Injector]),t["\u0275mpd"](4608,Il.a,Il.a,[t.Injector]),t["\u0275mpd"](4608,Rl.a,Rl.a,[O.l]),t["\u0275mpd"](4608,z.b,z.b,[z.d]),t["\u0275mpd"](4608,z.e,z.e,[z.d]),t["\u0275mpd"](4608,El.a,El.a,[z.d]),t["\u0275mpd"](4608,ql.a,ql.a,[z.d]),t["\u0275mpd"](4608,I.FormBuilder,I.FormBuilder,[]),t["\u0275mpd"](4608,L.a,L.a,[O.l,z.b,El.a,ql.a,z.e]),t["\u0275mpd"](4608,kl.a,kl.a,[]),t["\u0275mpd"](4608,pl.a,pl.a,[Fl.n]),t["\u0275mpd"](4608,Vl.a,Vl.a,[jl.a,zl.a,Al.a,Nl.b]),t["\u0275mpd"](4608,Ll.a,Ll.a,[O.l,Gl.a,Hl.c]),t["\u0275mpd"](4608,Kl.a,Kl.a,[O.l,Gl.a,Hl.c]),t["\u0275mpd"](4608,Bl.a,Bl.a,[O.l,fl.c]),t["\u0275mpd"](4608,Yl.a,Yl.a,[O.l,fl.c]),t["\u0275mpd"](4608,Ul.a,Ul.a,[]),t["\u0275mpd"](4608,Bn.a,Bn.a,[]),t["\u0275mpd"](4608,$l.a,$l.a,[Al.a,Ul.a]),t["\u0275mpd"](4608,Zl.a,Zl.a,[M.d,t.PLATFORM_ID]),t["\u0275mpd"](4608,gl,gl,[O.l,fl.c]),t["\u0275mpd"](1073742336,M.c,M.c,[]),t["\u0275mpd"](1073742336,z.c,z.c,[]),t["\u0275mpd"](1073742336,O.i,O.i,[]),t["\u0275mpd"](1073742336,Wl.e,Wl.e,[]),t["\u0275mpd"](1073742336,Fl.p,Fl.p,[[2,Fl.w],[2,Fl.n]]),t["\u0275mpd"](1073742336,E.c,E.c,[]),t["\u0275mpd"](1073742336,q.b,q.b,[]),t["\u0275mpd"](1073742336,q.Z,q.Z,[]),t["\u0275mpd"](1073742336,q.kb,q.kb,[]),t["\u0275mpd"](1073742336,q.e,q.e,[]),t["\u0275mpd"](1073742336,F.f,F.f,[]),t["\u0275mpd"](1073742336,q.Q,q.Q,[]),t["\u0275mpd"](1073742336,q.f,q.f,[]),t["\u0275mpd"](1073742336,q.m,q.m,[]),t["\u0275mpd"](1073742336,q.q,q.q,[]),t["\u0275mpd"](1073742336,q.db,q.db,[]),t["\u0275mpd"](1073742336,q.s,q.s,[]),t["\u0275mpd"](1073742336,q.n,q.n,[]),t["\u0275mpd"](1073742336,_l.m,_l.m,[]),t["\u0275mpd"](1073742336,_l.f,_l.f,[]),t["\u0275mpd"](1073742336,I["\u0275angular_packages_forms_forms_bc"],I["\u0275angular_packages_forms_forms_bc"],[]),t["\u0275mpd"](1073742336,I.FormsModule,I.FormsModule,[]),t["\u0275mpd"](1073742336,E.i,E.i,[]),t["\u0275mpd"](1073742336,Jl.x,Jl.x,[]),t["\u0275mpd"](1073742336,Jl.y,Jl.y,[]),t["\u0275mpd"](1073742336,Jl.i,Jl.i,[]),t["\u0275mpd"](1073742336,Xl.b,Xl.b,[]),t["\u0275mpd"](1073742336,E.b,E.b,[]),t["\u0275mpd"](1073742336,_l.s,_l.s,[]),t["\u0275mpd"](1073742336,Ql.a,Ql.a,[]),t["\u0275mpd"](1073742336,ne.a,ne.a,[]),t["\u0275mpd"](1073742336,le.Ec,le.Ec,[]),t["\u0275mpd"](1073742336,le.T,le.T,[]),t["\u0275mpd"](1073742336,le.Hb,le.Hb,[]),t["\u0275mpd"](1073742336,I.ReactiveFormsModule,I.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,ee.t,ee.t,[]),t["\u0275mpd"](1073742336,le.f,le.f,[]),t["\u0275mpd"](1073742336,Jl.b,Jl.b,[]),t["\u0275mpd"](1073742336,ee.C,ee.C,[]),t["\u0275mpd"](1073742336,ee.w,ee.w,[]),t["\u0275mpd"](1073742336,ee.A,ee.A,[]),t["\u0275mpd"](1073742336,ee.m,ee.m,[]),t["\u0275mpd"](1073742336,ee.f,ee.f,[]),t["\u0275mpd"](1073742336,ee.h,ee.h,[]),t["\u0275mpd"](1073742336,le.Dc,le.Dc,[]),t["\u0275mpd"](1073742336,le.wc,le.wc,[]),t["\u0275mpd"](1073742336,le.qb,le.qb,[]),t["\u0275mpd"](1073742336,le.C,le.C,[]),t["\u0275mpd"](1073742336,le.Lb,le.Lb,[]),t["\u0275mpd"](1073742336,le.yb,le.yb,[]),t["\u0275mpd"](1073742336,le.oc,le.oc,[]),t["\u0275mpd"](1073742336,le.Cb,le.Cb,[]),t["\u0275mpd"](1073742336,te.TextMaskModule,te.TextMaskModule,[]),t["\u0275mpd"](1073742336,ue.e,ue.e,[]),t["\u0275mpd"](1073742336,ie.a,ie.a,[]),t["\u0275mpd"](1073742336,le.eb,le.eb,[]),t["\u0275mpd"](1073742336,ae.a,ae.a,[]),t["\u0275mpd"](1073742336,oe.a,oe.a,[]),t["\u0275mpd"](1073742336,re.a,re.a,[]),t["\u0275mpd"](1073742336,de.a,de.a,[]),t["\u0275mpd"](1073742336,ce.a,ce.a,[]),t["\u0275mpd"](1073742336,se.a,se.a,[]),t["\u0275mpd"](1073742336,pe.a,pe.a,[]),t["\u0275mpd"](1073742336,Jl.d,Jl.d,[]),t["\u0275mpd"](1073742336,Jl.s,Jl.s,[]),t["\u0275mpd"](1073742336,Jl.j,Jl.j,[]),t["\u0275mpd"](1073742336,xl.a,xl.a,[]),t["\u0275mpd"](256,me.a,[{component:hl,key:fe}],[]),t["\u0275mpd"](1073742336,me.b,me.b,[ge.a,me.a]),t["\u0275mpd"](1073742336,he,he,[]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](256,q.Y,q.nb,[]),t["\u0275mpd"](256,O.o,void 0,[]),t["\u0275mpd"](256,O.n,void 0,[]),t["\u0275mpd"](256,Jl.z,Jl.D,[]),t["\u0275mpd"](1024,Fl.l,function(){return[[{path:"",component:hl}]]},[])])})}}]);